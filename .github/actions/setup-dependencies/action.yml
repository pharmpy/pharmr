name: "Set up dependencies"
description: "Sets up system and package dependencies"

runs:
  using: "composite"
  steps:
    - uses: r-lib/actions/setup-r@v2
      with:
        r-version: "release"
        use-public-rspm: true

    - uses: r-lib/actions/setup-pandoc@v2

    - uses: actions/setup-python@v5
      with:
          python-version: "3.12"

    - name: Install dependencies
      uses: r-lib/actions/setup-r-dependencies@v2
      with:
        extra-packages: any::roxygen2
        needs: roxygen2
        working-directory: pharmr_repo

    - name: Install R packages
      working-directory: pharmr_repo
      run: |
        install.packages('rcmdcheck') 
        install.packages('devtools')
        install.packages('promises')
        remotes::install_local(force=TRUE, build=TRUE, dependencies=TRUE)
      shell: Rscript {0}

